<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Index</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1 class="blog-title">Generative Art Blog</h1>
    <div class="top-links">
        <a href="https://www.linkedin.com/in/kevincewing/" target="_blank">LinkedIn</a>
        <a href="mailto:kevin.c.ewing@outlook.net">Email</a>
        <a href="https://www.linkedin.com/in/kevincewing/" target="_blank">GitHub</a>
    </div>
    <div id="blog-container"></div>

    <script>
        const directories = [
            "Bedoop",
            "Sprills",
            "Eclipse Web",
        ];

        async function fetchMetadata(dir) {
            try {
                const response = await fetch(`./${dir}/metadata.json`);
                if (!response.ok) throw new Error("Failed to load metadata");
                return await response.json();
            } catch (error) {
                console.error("Error fetching metadata:", error);
                return null;
            }
        }

        async function loadBlogPosts() {
            const container = document.getElementById("blog-container");
            for (const dir of directories) {
                const metadata = await fetchMetadata(dir);
                if (metadata) {
                    const postElement = document.createElement("a");
                    postElement.className = "blog-post";
                    postElement.href = `./${dir}/`;
                    postElement.innerHTML = `
                        <img src="./${dir}/thumbnail.jpg" alt="Thumbnail" class="thumbnail">
                        <div class="blog-info">
                            <div class="blog-meta">
                                <img src="./resources/author.jpg" alt="Author" class="author-image">
                                <div>
                                    <p class="author-name">${metadata.author}</p>
                                    <p class="post-date">${metadata.date} â€¢ ${metadata.read_time} minute read</p>
                                </div>
                            </div>
                            <h2>${metadata.title}</h2>
                            <p class="description">${metadata.description}</p>
                        </div>
                    `;
                    container.appendChild(postElement);
                }
            }
        }

        loadBlogPosts();
    </script>
    <div class="footer">&copy; Kevin Ewing <span id="year"></span></div>
    <script>
        document.getElementById('year').textContent = new Date().getFullYear();
    </script>
</body>
</html>
